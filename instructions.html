<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="./styles/global.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>VPN Инструкции</title>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            try {
                if (typeof window !== 'undefined' && window.Telegram?.WebApp) {
                    const tg = window.Telegram.WebApp;
                    tg.ready();
                    tg.expand();
                    tg.disableVerticalSwipes();

                    if (tg.requestFullscreen) {
                        tg.requestFullscreen();
                        window.Telegram.WebApp.disableClosingConfirmation();
                    } else {
                        tg.expand();
                    }
                }
            } catch (e) {
                console.error(e);
            }
        });
    </script>
    <script src="../../bot_watcher/frontend/nuxt.config.ts"></script>
</head>
<body>
<header>
    <h1>Инструкции по настройке VPN</h1>
</header>
<div class="container">
    <h2>Шаг 1: Выберите вашу платформу</h2>
    <div class="button-group">
        <button onclick="selectPlatform('ios')">iOS</button>
        <button onclick="selectPlatform('android')">Android</button>
        <button onclick="selectPlatform('pc')">ПК (Windows)</button>
    </div>

    <div id="app-description" class="hidden">
        <h2>Шаг 2: Выберите приложение</h2>
        <p><strong>Hiddify</strong> — простое и удобное приложение для подключения к VPN, рекомендовано для большинства
            пользователей.</p>
        <p><strong>V2Box</strong> — более продвинутое приложение с гибкими настройками для опытных пользователей.</p>
        <div class="button-group" id="app-buttons"></div>
    </div>

    <div id="instructions">
        <div id="hiddifi-ios" class="video-section">
            <h2>Hiddifi iOS</h2>
            <div class="video">
                <video controls src="./videos/ios-hiddify-button.mp4"></video>
            </div>
            <div class="video">
                <video controls src="./videos/ios-hiddify-link.mp4"></video>
            </div>
            <div class="video">
                <video controls src="./videos/ios-hiddify-qr.mp4"></video>
            </div>
        </div>

        <div id="v2box-ios" class="video-section">
            <h2>V2Box iOS</h2>
<!--            <div class="video">-->
<!--                <video controls src="videos/ios-v2box-button.mp4"></video>-->
<!--            </div>-->
<!--            <div class="video">-->
<!--                <video controls src="videos/ios-v2box-link.mp4"></video>-->
<!--            </div>-->
            <div class="video">
                <video controls src="videos/ios-v2box-qr.mp4"></video>
            </div>
        </div>

        <div id="hiddifi-android" class="video-section">
            <h2>Hiddifi Android</h2>
            <div class="video">
                <video controls src="videos/android-hiddify-button.mp4"></video>
            </div>
            <div class="video">
                <video controls src="videos/android-hiddify-link.mp4"></video>
            </div>
            <div class="video">
                <video controls src="videos/android-hiddify-qr.mp4"></video>
            </div>
        </div>

        <div id="v2box-android" class="video-section">
            <h2>V2Box Android</h2>
<!--            <div class="video">-->
<!--                <video controls src="videos/android-v2box-button.mp4"></video>-->
<!--            </div>-->
            <div class="video">
                <video controls src="videos/android-v2box-link.mp4"></video>
            </div>
            <div class="video">
                <video controls src="videos/android-v2box-qr.mp4"></video>
            </div>
            <div class="application">
                <a href="./videos/V2Box+-+V2ray+Client_2.3.0.apk">Приложение V2Box</a>
            </div>
        </div>

        <div id="hiddifi-pc" class="video-section">
            <h2>Hiddifi ПК</h2>
            <div class="video">
                <video controls src="videos/pc-hiddify-button.mp4"></video>
            </div>
            <div class="video">
                <video controls src="videos/pc-hiddify-link.mp4"></video>
            </div>
        </div>

        <div id="region-ios" class="video-section">
            <h2>Смена региона AppStore</h2>
            <div class="video">
                <video controls src="videos/ios-change-region.mp4"></video>
            </div>
        </div>
    </div>
</div>

<script>
    const appOptions = {
        ios: [
            {label: 'Hiddifi', value: 'hiddifi-ios'},
            {label: 'V2Box', value: 'v2box-ios'},
            {label: 'Смена региона AppStore', value: 'region-ios'}
        ],
        android: [
            {label: 'Hiddifi', value: 'hiddifi-android'},
            {label: 'V2Box', value: 'v2box-android'}
        ],
        pc: [
            {label: 'Hiddifi', value: 'hiddifi-pc'}
        ]
    };

    function selectPlatform(platform) {
        const appDesc = document.getElementById('app-description');
        const appButtons = document.getElementById('app-buttons');
        appButtons.innerHTML = '';

        if (appOptions[platform]) {
            appOptions[platform].forEach(app => {
                const btn = document.createElement('button');
                btn.textContent = app.label;
                btn.onclick = () => showInstructions(app.value);
                appButtons.appendChild(btn);
            });
            appDesc.classList.remove('hidden');
        } else {
            appDesc.classList.add('hidden');
        }

        // Скрыть все видеоинструкции при смене платформы
        document.querySelectorAll('.video-section').forEach(el => el.style.display = 'none');
    }

    function showInstructions(id) {
        document.querySelectorAll('.video-section').forEach(el => el.style.display = 'none');
        const section = document.getElementById(id);
        if (section) section.style.display = 'block';
    }
</script>
</body>
</html>
